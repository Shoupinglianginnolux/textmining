{% extends 'base_generic.html' %}

{% block content %}
        <div class="row">
            <div id="progress-wrapper">
                <button id="progress-bar-trigger">Run</button>
                <div id="progress-bar" style="background-color: blue; width: 0%;">&nbsp;</div>
                <div id="progress-bar-message">Waiting for progress to start...</div>
              </div>
        </div>

      <script>
        function updateProgress(progressBarElement, progressBarMessageElement, progress) {
            progressBarElement.style.width = progress.percent + "%";
            progressBarMessageElement.innerHTML = 'It takes about 5-10 minutes to update the database. Go grab a cup of coffee. <br/>' + progress.current + '% of ' + progress.total + ' processed.';
        }

        var trigger = document.getElementById('progress-bar-trigger');
        trigger.addEventListener('click', function(e) {
        var bar = document.getElementById("progress-bar");
        var barMessage = document.getElementById("progress-bar-message");
        for (var i = 0; i < 101; i++) {
            setTimeout(updateProgress, 5000 * i, bar, barMessage, {
            percent: i,
            current: i,
            total: 100
            })
        }
        })
    </script>
{% endblock  %}